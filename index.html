<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bonjour Monde</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="hero">
    <div class="hero__overlay"></div>
    <div class="hero__content">
      <p class="hero__eyebrow">Projet en construction</p>
      <h1 class="hero__title">Hello World</h1>
      <p class="hero__subtitle">Un premier pas vers un nouveau site web minimaliste.</p>
      <a class="hero__cta" href="#intro">Découvrir</a>
    </div>
  </header>

  <main id="intro" class="intro">
    <div class="intro__card">
      <h2>Bienvenue</h2>
      <p>Ce site simple affiche « Hello World » pour marquer le début du projet. Vous pourrez étoffer le contenu au fil du temps.</p>
    </div>
  </main>

  <section class="chart" aria-labelledby="chart-title">
    <div class="chart__card">
      <div class="chart__header">
        <p class="chart__eyebrow">Données fictives</p>
        <h2 id="chart-title">Un petit nuage de points</h2>
        <p class="chart__description">Un graphe minimaliste qui montre comment quelques points peuvent raconter une tendance.</p>
      </div>
      <div class="chart__body">
        <div class="chart__figure" role="img" aria-label="Graphique en nuage de points"></div>
        <div class="chart__controls" aria-label="Réglages du nuage de points">
          <div class="chart__control">
            <div class="chart__control-header">
              <label for="slope-slider">Inclinaison</label>
              <span id="slope-value" class="chart__pill">0.7</span>
            </div>
            <input id="slope-slider" type="range" min="0.2" max="1.2" step="0.1" value="0.7">
            <p class="chart__control-hint">Ajustez la pente pour rapprocher ou éloigner les points de la diagonale.</p>
          </div>
          <div class="chart__control">
            <div class="chart__control-header">
              <label for="spread-slider">Dispersion</label>
              <span id="spread-value" class="chart__pill">8</span>
            </div>
            <input id="spread-slider" type="range" min="2" max="18" step="1" value="8">
            <p class="chart__control-hint">Faites varier la dispersion pour obtenir un nuage plus serré ou plus diffus.</p>
          </div>
          <p class="chart__controls-note">Les curseurs mettent à jour instantanément les points générés aléatoirement.</p>
        </div>
      </div>
      <div class="chart__legend">
        <span class="chart__legend-dot"></span>
        <span>Chaque cercle représente une mesure simulée.</span>
      </div>
    </div>
  </section>

  <footer class="footer">
    <p>Créé avec ❤️ pour démarrer rapidement.</p>
  </footer>

  <script>
    const chartContainer = document.querySelector('.chart__figure');
    const slopeSlider = document.getElementById('slope-slider');
    const spreadSlider = document.getElementById('spread-slider');
    const slopeValue = document.getElementById('slope-value');
    const spreadValue = document.getElementById('spread-value');

    const width = chartContainer.clientWidth || 720;
    const height = 360;
    const margin = { top: 24, right: 24, bottom: 48, left: 48 };

    const svgNS = 'http://www.w3.org/2000/svg';
    const svg = document.createElementNS(svgNS, 'svg');
    svg.setAttribute('viewBox', `0 0 ${width} ${height}`);
    svg.setAttribute('role', 'presentation');

    const innerWidth = width - margin.left - margin.right;
    const innerHeight = height - margin.top - margin.bottom;

    const minX = 0;
    const maxX = 100;
    const minY = 0;
    const maxY = 100;

    const scaleX = (x) => margin.left + (x - minX) / (maxX - minX) * innerWidth;
    const scaleY = (y) => margin.top + innerHeight - (y - minY) / (maxY - minY) * innerHeight;

    const axes = document.createElementNS(svgNS, 'g');
    axes.setAttribute('stroke', 'rgba(226, 232, 240, 0.4)');
    axes.setAttribute('stroke-width', '1.5');
    axes.setAttribute('shape-rendering', 'crispEdges');

    const xAxis = document.createElementNS(svgNS, 'line');
    xAxis.setAttribute('x1', margin.left);
    xAxis.setAttribute('x2', margin.left + innerWidth);
    xAxis.setAttribute('y1', margin.top + innerHeight);
    xAxis.setAttribute('y2', margin.top + innerHeight);
    axes.appendChild(xAxis);

    const yAxis = document.createElementNS(svgNS, 'line');
    yAxis.setAttribute('x1', margin.left);
    yAxis.setAttribute('x2', margin.left);
    yAxis.setAttribute('y1', margin.top);
    yAxis.setAttribute('y2', margin.top + innerHeight);
    axes.appendChild(yAxis);

    const tickCount = 5;
    for (let i = 0; i <= tickCount; i++) {
      const xValue = minX + (maxX - minX) * (i / tickCount);
      const xPos = scaleX(xValue);
      const xTick = document.createElementNS(svgNS, 'line');
      xTick.setAttribute('x1', xPos);
      xTick.setAttribute('x2', xPos);
      xTick.setAttribute('y1', margin.top + innerHeight);
      xTick.setAttribute('y2', margin.top + innerHeight + 6);
      xTick.setAttribute('stroke', 'rgba(226, 232, 240, 0.4)');
      axes.appendChild(xTick);

      const xLabel = document.createElementNS(svgNS, 'text');
      xLabel.textContent = Math.round(xValue);
      xLabel.setAttribute('x', xPos);
      xLabel.setAttribute('y', margin.top + innerHeight + 22);
      xLabel.setAttribute('fill', 'var(--muted)');
      xLabel.setAttribute('font-size', '12');
      xLabel.setAttribute('text-anchor', 'middle');
      axes.appendChild(xLabel);
    }

    for (let i = 0; i <= tickCount; i++) {
      const yValue = minY + (maxY - minY) * (i / tickCount);
      const yPos = scaleY(yValue);
      const yTick = document.createElementNS(svgNS, 'line');
      yTick.setAttribute('x1', margin.left - 6);
      yTick.setAttribute('x2', margin.left);
      yTick.setAttribute('y1', yPos);
      yTick.setAttribute('y2', yPos);
      yTick.setAttribute('stroke', 'rgba(226, 232, 240, 0.4)');
      axes.appendChild(yTick);

      const yLabel = document.createElementNS(svgNS, 'text');
      yLabel.textContent = Math.round(yValue);
      yLabel.setAttribute('x', margin.left - 12);
      yLabel.setAttribute('y', yPos + 4);
      yLabel.setAttribute('fill', 'var(--muted)');
      yLabel.setAttribute('font-size', '12');
      yLabel.setAttribute('text-anchor', 'end');
      axes.appendChild(yLabel);
    }

    svg.appendChild(axes);

    const pointsGroup = document.createElementNS(svgNS, 'g');
    svg.appendChild(pointsGroup);

    const defs = document.createElementNS(svgNS, 'defs');
    const gradient = document.createElementNS(svgNS, 'linearGradient');
    gradient.setAttribute('id', 'pointGradient');
    gradient.setAttribute('x1', '0%');
    gradient.setAttribute('y1', '0%');
    gradient.setAttribute('x2', '100%');
    gradient.setAttribute('y2', '100%');

    const stop1 = document.createElementNS(svgNS, 'stop');
    stop1.setAttribute('offset', '0%');
    stop1.setAttribute('stop-color', '#38bdf8');
    gradient.appendChild(stop1);

    const stop2 = document.createElementNS(svgNS, 'stop');
    stop2.setAttribute('offset', '100%');
    stop2.setAttribute('stop-color', '#6366f1');
    gradient.appendChild(stop2);

    defs.appendChild(gradient);
    svg.insertBefore(defs, svg.firstChild);

    chartContainer.appendChild(svg);

    function generatePoints(slope, spread) {
      const count = 13;
      const points = [];
      for (let i = 0; i < count; i++) {
        const x = 8 + (84 / (count - 1)) * i;
        const baseY = 12 + slope * x * 0.8;
        const noise = (Math.random() - 0.5) * spread * 2;
        const y = Math.max(minY + 4, Math.min(maxY - 4, baseY + noise));
        points.push({ x, y });
      }
      return points;
    }

    function renderPoints(points) {
      pointsGroup.innerHTML = '';
      points.forEach(point => {
        const circle = document.createElementNS(svgNS, 'circle');
        circle.setAttribute('cx', scaleX(point.x));
        circle.setAttribute('cy', scaleY(point.y));
        circle.setAttribute('r', 7);
        circle.setAttribute('fill', 'url(#pointGradient)');
        circle.setAttribute('stroke', 'rgba(226, 232, 240, 0.2)');
        circle.setAttribute('stroke-width', '1.5');
        pointsGroup.appendChild(circle);
      });
    }

    function updateChart() {
      const slope = Number(slopeSlider.value);
      const spread = Number(spreadSlider.value);
      slopeValue.textContent = slope.toFixed(1);
      spreadValue.textContent = spread.toFixed(0);
      const newPoints = generatePoints(slope, spread);
      renderPoints(newPoints);
    }

    slopeSlider.addEventListener('input', updateChart);
    spreadSlider.addEventListener('input', updateChart);

    updateChart();
  </script>
</body>
</html>
